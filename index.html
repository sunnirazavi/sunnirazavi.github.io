<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO Meta Tags -->
  <meta name="description" content="Listen to Naat Sharif by Owais Raza Qadri. Enjoy high-quality audio tracks, download your favorites, and experience soulful recitations." />
  <meta name="keywords" content="Naat, Owais Raza Qadri, Naat Sharif, Audio, Islamic Recitations, Download, Rohani Naat"/>
  <meta name="author" content="sunnirazavi">
  <link rel="canonical" href="https://sunnirazavi.github.io/index.html">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Naat Collection - Owais Raza Qadri">
  <meta property="og:description" content="Listen to Naat Sharif by Owais Raza Qadri. Enjoy high-quality audio tracks and download your favorite recitations.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://sunnirazavi.github.io/index.html">
  <meta property="og:image" content="https://raw.githubusercontent.com/sunnirazavi/sunnirazavi.github.io/e85726914991a9ad6a37f0ba42612f5756aeffb7/Thumbnail/Kya%20Hi%20Zoq%20Afza%20Shafaat.jpeg?v=1.0">

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Naat Collection - Owais Raza Qadri">
  <meta name="twitter:description" content="Listen to Naat Sharif by Owais Raza Qadri. Enjoy high-quality audio tracks and download your favorite recitations.">
  <meta name="twitter:image" content="https://raw.githubusercontent.com/sunnirazavi/sunnirazavi.github.io/e85726914991a9ad6a37f0ba42612f5756aeffb7/Thumbnail/Kya%20Hi%20Zoq%20Afza%20Shafaat.jpeg?v=1.0">

  <!-- Structured Data (JSON-LD) for Playlist -->
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "NaatPlaylist",
    "name": "Naat Collection - Owais Raza Qadri",
    "description": "A collection of soulful Naat Sharif by Owais Raza Qadri.",
    "url": "https://sunnirazavi.github.io/index.html",
    "creator": {
      "@type": "Organization",
      "name": "sunnirazavi"
    },
    "track": [
      {
        "@type": "NaatRecording",
        "name": "Kya Hi Zoq Afza Shafaat Hai Tumhari Wah Wah",
        "url": "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Kya%20Hi%20Zoq%20Afza%20Shafaat%20-%20Owais%20Raza%20Qadri%20-%202021.mp3?v=1.0"
      },
      {
        "@type": "NaatRecording",
        "name": "Zameen O Zaman Tumhare Liye",
        "url": "Naat-Collection/Zameen%20O%20Zaman%20Tumhare%20Liye%20-%20Owais%20Raza%20Qadri.mp3?v=1.0"
      },
      {
        "@type": "NaatRecording",
        "name": "Sir Taba Qadam Hai Tane Sultan E Zaman Phool",
        "url": "Naat-Collection/Sir%20Taba%20Qadam%20Hai%20Tane%20Sultan%20E%20Zaman%20Phool%20-%20Owais%20Raza%20Qadri.mp3?v=1.0"
      },
      {
        "@type": "NaatRecording",
        "name": "Chaman E Taiba Mein Sumbul Jo Saware Gesu",
        "url": "Naat-Collection/Chaman%20E%20Taiba%20Mein%20Sumbul%20-%20Owais%20Raza%20Qadri.mp3?v=1.0"
      },
      {
        "@type": "NaatRecording",
        "name": "Dekhni Hai Hashr Mein Izzat Rasoolullah Ki",
        "url": "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Dekhni%20Hai%20Hashr%20Mein%20Izzat%20Rasoolullah%20Ki%20-%20Owais%20Raza%20Qadri.mp3?v=1.0"
      },
      {
        "@type": "NaatRecording",
        "name": "Sachi Baat Sikhatey Ye Hain",
        "url": "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Sachi%20Baat%20Sikhatey%20Ye%20Hain%20-%20Owais%20Raza%20Qadri.mp3?v=1.0"
      },
      {
        "@type": "NaatRecording",
        "name": "Hajiyon Aao Shehenshah Ka Roza Dekho",
        "url": "Naat-Collection/Hajiyon%20Aao%20Shehenshah%20Ka%20Roza%20Dekho%20-%20Owais%20Raza%20Qadri.mp3"
      },
      {
        "@type": "NaatRecording",
        "name": "Lutf Unka Aam Ho Hi Jayega",
        "url": "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Lutf%20Unka%20Aam%20Ho%20Hi%20Jayega%20-%20Owais%20Raza%20Qadri.mp3"
      },
      {
        "@type": "NaatRecording",
        "name": "Bakhte Khufta Ne Mujhe Roze Pe Jane Na Diya",
        "url": "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Bakhte%20Khufta%20Ne%20Mujhe%20Roze%20Pe%20Jane%20Na%20Diya%20-%20Owais%20Raza%20Qadri.mp3"
      },
      {
        "@type": "NaatRecording",
        "name": "Bakhte Khufta Ne Mujhe Roze Pe Jane Na Diya 2",
        "url": "Naat-Collection/Bakhte%20Khufta%20Ne%20Mujhe%20Roze%20Pe%20Jane%20Na%20Diya%202%20-%20Owais%20Raza%20Qadri.mp3"
      },
      {
        "@type": "NaatRecording",
        "name": "Har Waqt Tasawwar Mein Madine Ki Gali Ho",
        "url": "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Har%20Waqt%20Tasawwar%20Mein%20Madine%20Ki%20Gali%20Ho%20-%20Owais%20Raza%20Qadri.mp3"
      },
      {
        "@type": "NaatRecording",
        "name": "Zameen O Zaman Tumhare Liye 2",
        "url": "Naat-Collection/Zameen%20O%20Zaman%20Tumhare%20Liye%202%20-%20Owais%20Raza%20Qadri.mp3"
      },
      {
        "@type": "NaatRecording",
        "name": "Sir Taba Qadam Hai Tane Sultan E Zaman Phool 2",
        "url": "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Sir%20Taba%20Qadam%20Hai%20Tane%20Sultan%20E%20Zaman%20Phool%202%20-%20Owais%20Raza%20Qadri.mp3"
      },
      {
        "@type": "NaatRecording",
        "name": "Bakhte Khufta Ne Mujhe Roze Pe Jane Na Diya 3",
        "url": "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Bakhte%20Khufta%20Ne%20Mujhe%20Roze%20Pe%20Jane%20Na%20Diya%203%20-%20Owais%20Raza%20Qadri.mp3"
      }
    ]
  }
  </script>

  <!-- Include Fuse.js for Fuzzy Searching -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <!-- Include Font Awesome for the search icon -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
    integrity="sha512-p1CmRb96hzbN/wI2p5M8S5Y0+h5LZby8R0Wg34z0AGuZhKzTHHqMb63nUNmsRlsu+PpSp0G+9L/wY6yD+4n5dQ==" 
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <title>Naat Collection - Owais Raza Qadri</title>
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
    }
    /* Navigation Header Styling */
    header {
      background-color: var(--primary-color);
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 1.5em;
    }
    .search-wrapper {
      display: flex;
      align-items: center;
      background-color: #fff;
      border-radius: 25px;
      padding: 5px 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      width: 280px;
    }
    .search-wrapper i {
      color: var(--secondary-color);
      margin-right: 10px;
      font-size: 1.2em;
    }
    #nav-search {
      width: 100%;
      padding: 10px 5px;
      border: none;
      background-color: transparent;
      color: #333;
      font-size: 16px;
      outline: none;
    }
    #nav-search:focus { outline: none; }

    /* Alert Banner Styling */
    .alert-banner {
      background-color: #f1c40f;
      color: #333;
      padding: 10px 20px;
      font-size: 0.95em;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
    }
    .alert-banner span { flex-grow: 1; }
    .alert-banner button {
      background: none;
      border: none;
      font-size: 1.2em;
      cursor: pointer;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f6fa;
    }
    
    .featured-audio {
      background: white;
      padding: 25px;
      border-radius: 15px;
      margin: 30px 0;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      display: flex;
      gap: 20px;
      align-items: center;
      overflow: hidden;
      flex-wrap: wrap;
    }
    .featured-thumbnail {
      width: 500px;
      height: 330px;
      border-radius: 10px;
      flex-shrink: 0;
      object-fit: cover;
      loading: lazy;
    }
    
    .audio-item {
      background: white;
      padding: 15px;
      border-radius: 10px;
      display: flex;
      gap: 15px;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      transition: transform 0.2s;
      overflow: hidden;
      flex-wrap: wrap;
      margin-bottom: 15px;
    }
    .audio-item:hover { transform: translateY(-2px); }
    
    .thumbnail {
      width: 200px;
      height: 130px;
      border-radius: 8px;
      object-fit: cover;
      flex-shrink: 0;
      loading: lazy;
    }
    
    .track-info {
      flex-grow: 1;
      min-width: 150px;
      margin-left: 15px;
    }
    
    .track-title {
      margin: 0;
      color: var(--primary-color);
      font-size: 1.1em;
    }
    
    .track-Reciter {
      margin: 5px 0 0;
      color: #7f8c8d;
      font-size: 0.9em;
    }
    
    audio {
      flex-grow: 2;
      min-width: 200px;
      max-width: 400px;
    }
    
    .download-btn {
      background: var(--secondary-color);
      color: white;
      padding: 8px 15px;
      text-decoration: none;
      border-radius: 20px;
      font-size: 14px;
      transition: background 0.3s;
      flex-shrink: 0;
    }
    .download-btn:hover { background: #2980b9; }
    
    .featured-title {
      font-size: 1.5em;
      margin: 0 0 10px;
    }
    
    .featured-info {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-left: 15px;
    }
    .featured-info .download-btn {
      width: 70%;
      text-align: center;
      margin-top: 5px;
    }
    
    /* ===== Feedback Button ===== */
    #feedback-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #00d2ff, #3a7bd5);
      border: none;
      border-radius: 50%;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 15px rgba(0,0,0,0.3);
      cursor: pointer;
      z-index: 1000;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    #feedback-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }
    #feedback-btn svg {
      display: block;
      width: 40px;
      height: 40px;
      fill: white;
    }
    
    /* ===== Modal Feedback Form ===== */
    .modal {
      display: none;
      position: fixed;
      z-index: 1001;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.5);
    }
    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      position: relative;
    }
    .modal-content h2 { margin-top: 0; }
    .modal-content input,
    .modal-content textarea {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .modal-content button {
      background: var(--secondary-color);
      color: #fff;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
    }
    .close {
      position: absolute;
      right: 15px;
      top: 10px;
      font-size: 24px;
      cursor: pointer;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .featured-audio {
        flex-direction: column;
        text-align: center;
        padding: 20px;
      }
      .featured-thumbnail { width: 405px; height: 300px; }
      .featured-title { font-size: 1.3em; }
      .thumbnail { width: 220px; height: 180px; }
      .audio-item { flex-wrap: wrap; gap: 10px; padding: 12px; margin-bottom: 2px; }
      audio { min-width: 100%; order: 3; }
      .featured-info .download-btn { width: 92%; display: block; text-align: center; margin-top: 5px; }
      .download-btn { width: 93%; text-align: center; order: 4; margin-top: 5px; }
      .search-wrapper { width: 220px; }
    }
    @media (max-width: 480px) {
      body { padding: 15px; }
      .featured-audio { padding: 15px; }
      .featured-thumbnail { width: 305px; height: 200px; }
      .featured-title { font-size: 1.2em; }
      .thumbnail { width: 120px; height: 80px; }
      .track-title { font-size: 1em; }
      .track-Reciter { font-size: 0.85em; }
      .download-btn { font-size: 13px; padding: 8px 12px; }
    }
  </style>
</head>
<body>
  <!-- Navigation Header with Integrated Search Bar -->
  <header>
    <h1>Naat Collection</h1>
    <div class="search-wrapper">
      <i class="fa fa-search"></i>
      <input type="text" id="nav-search" placeholder="Search Naat..." />
    </div>
  </header>
  
  <!-- Alert Banner -->
  <div id="alert-banner" class="alert-banner">
    <span>If the download button isnâ€™t working, please click the three dots for an alternative download option.</span>
    <button id="close-alert" aria-label="Dismiss Alert">&times;</button>
  </div>
  
  <!-- Featured Audio Section -->
  <div id="featured"></div>
  
  <!-- Audio List Section (populated incrementally via pagination) -->
  <div id="audio-list"></div>
  
  <!-- Floating Feedback Button -->
  <button id="feedback-btn" title="Feedback" aria-label="Feedback">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4-.9L3 21l1.9-4.1A8.966 8.966 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
    </svg>
  </button>
  
  <!-- Feedback Modal -->
  <div id="feedback-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Feedback</h2>
      <form id="feedback-form" action="https://formspree.io/f/xpwqvqlb" method="POST">
        <input type="text" name="name" placeholder="Your Name" required>
        <input type="email" name="_replyto" placeholder="Your Email" required>
        <textarea name="message" placeholder="Your Feedback" required></textarea>
        <button type="submit">Send</button>
      </form>
    </div>
  </div>
  
  <script>
    // Audio Data Configuration with updated URLs and lazy-loading attributes
    const audioData = [
      {
        id: 1,
        title: "Kya Hi Zoq Afza Shafaat Hai Tumhari Wah Wah",
        Reciter: "Owais Raza Qadri",
        file: "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Kya%20Hi%20Zoq%20Afza%20Shafaat%20-%20Owais%20Raza%20Qadri%20-%202021.mp3?v=1.0",
        thumb: "Thumbnail/Kya%20Hi%20Zoq%20Afza%20Shafaat.jpeg?v=1.0",
        featured: true
      },
      {
        id: 2,
        title: "Zameen O Zaman Tumhare Liye",
        Reciter: "Owais Raza Qadri",
        file: "Naat-Collection/Zameen%20O%20Zaman%20Tumhare%20Liye%20-%20Owais%20Raza%20Qadri.mp3?v=1.0",
        thumb: "Thumbnail/Zameen%20O%20Zaman%20Tumhare%20Liye.jpeg?v=1.0"
      },
      {
        id: 3,
        title: "Sir Taba Qadam Hai Tane Sultan E Zaman Phool",
        Reciter: "Owais Raza Qadri",
        file: "Naat-Collection/Sir%20Taba%20Qadam%20Hai%20Tane%20Sultan%20E%20Zaman%20Phool%20-%20Owais%20Raza%20Qadri.mp3?v=1.0",
        thumb: "Thumbnail/Sir%20Taba%20Qadam.jpeg?v=1.0"
      },
      {
        id: 4,
        title: "Chaman E Taiba Mein Sumbul Jo Saware Gesu",
        Reciter: "Owais Raza Qadri",
        file: "Naat-Collection/Chaman%20E%20Taiba%20Mein%20Sumbul%20-%20Owais%20Raza%20Qadri.mp3?v=1.0",
        thumb: "Thumbnail/Chaman%20E%20Taiba%20Mein%20Sumbul.jpeg?v=1.0"
      },
      {
        id: 5,
        title: "Dekhni Hai Hashr Mein Izzat Rasoolullah Ki",
        Reciter: "Owais Raza Qadri",
        file: "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Dekhni%20Hai%20Hashr%20Mein%20Izzat%20Rasoolullah%20Ki%20-%20Owais%20Raza%20Qadri.mp3?v=1.0",
        thumb: "Thumbnail/Dekhni%20Hai%20Hashr%20Mein.jpeg?v=1.0"
      },
      {
        id: 6,
        title: "Sachi Baat Sikhatey Ye Hain",
        Reciter: "Owais Raza Qadri",
        file: "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Sachi%20Baat%20Sikhatey%20Ye%20Hain%20-%20Owais%20Raza%20Qadri.mp3?v=1.0",
        thumb: "Thumbnail/Sachi%20Baat%20Sikhatey%20Ye%20Hain.jpeg?v=1.0"
      },
      {
        id: 7,
        title: "Hajiyon Aao Shehenshah Ka Roza Dekho",
        Reciter: "Owais Raza Qadri",
        file: "Naat-Collection/Hajiyon%20Aao%20Shehenshah%20Ka%20Roza%20Dekho%20-%20Owais%20Raza%20Qadri.mp3",
        thumb: "Thumbnail/Hajiyon%20Aao.jpeg"
      },
      {
        id: 8,
        title: "Lutf Unka Aam Ho Hi Jayega",
        Reciter: "Owais Raza Qadri",
        file: "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Lutf%20Unka%20Aam%20Ho%20Hi%20Jayega%20-%20Owais%20Raza%20Qadri.mp3",
        thumb: "Thumbnail/Lutf%20Unka%20Aam.jpeg"
      },
      {
        id: 9,
        title: "Bakhte Khufta Ne Mujhe Roze Pe Jane Na Diya",
        Reciter: "Owais Raza Qadri",
        file: "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Bakhte%20Khufta%20Ne%20Mujhe%20Roze%20Pe%20Jane%20Na%20Diya%20-%20Owais%20Raza%20Qadri.mp3",
        thumb: "Thumbnail/Bakhte%20Khufta%20Ne.jpeg"
      },
      {
        id: 10,
        title: "Bakhte Khufta Ne Mujhe Roze Pe Jane Na Diya 2",
        Reciter: "Owais Raza Qadri",
        file: "Naat-Collection/Bakhte%20Khufta%20Ne%20Mujhe%20Roze%20Pe%20Jane%20Na%20Diya%202%20-%20Owais%20Raza%20Qadri.mp3",
        thumb: "Thumbnail/Bakhte%20Khufta%20Ne%20-%202.jpeg"
      },
      {
        id: 11,
        title: "Har Waqt Tasawwar Mein Madine Ki Gali Ho",
        Reciter: "Owais Raza Qadri",
        file: "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Har%20Waqt%20Tasawwar%20Mein%20Madine%20Ki%20Gali%20Ho%20-%20Owais%20Raza%20Qadri.mp3",
        thumb: "Thumbnail/Har%20Waqt%20Tasawwar.jpeg"
      },
      {
        id: 12,
        title: "Zameen O Zaman Tumhare Liye 2",
        Reciter: "Owais Raza Qadri",
        file: "Naat-Collection/Zameen%20O%20Zaman%20Tumhare%20Liye%202%20-%20Owais%20Raza%20Qadri.mp3",
        thumb: "Thumbnail/Zameen%20O%20Zaman%20Tumhare%20Liye%20-%202.jpeg"
      },
      {
        id: 13,
        title: "Sir Taba Qadam Hai Tane Sultan E Zaman Phool 2",
        Reciter: "Owais Raza Qadri",
        file: "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Sir%20Taba%20Qadam%20Hai%20Tane%20Sultan%20E%20Zaman%20Phool%202%20-%20Owais%20Raza%20Qadri.mp3",
        thumb: "Thumbnail/Sir%20Taba%20Qadam%20-%202.jpeg"
      },
      {
        id: 14,
        title: "Bakhte Khufta Ne Mujhe Roze Pe Jane Na Diya 3",
        Reciter: "Owais Raza Qadri",
        file: "https://cdn.jsdelivr.net/gh/sunnirazavi/Naat-Collection@main/Bakhte%20Khufta%20Ne%20Mujhe%20Roze%20Pe%20Jane%20Na%20Diya%203%20-%20Owais%20Raza%20Qadri.mp3",
        thumb: "Thumbnail/Bakhte%20Khufta%20Ne%20-%203.jpeg"
      }
    ];

    // Pagination configuration for lazy/infinite loading
    let itemsPerPage = 3;
    let currentPage = 0;
    let currentFilteredData = null;

    // Get featured track from URL (or default to track id 1)
    const urlParams = new URLSearchParams(window.location.search);
    const featuredId = urlParams.get('featured') || 1;
    const featuredTrack = audioData.find(track => track.id == featuredId) || audioData[0];

    // Initialize Fuse.js for fuzzy searching.
    const fuseOptions = {
      keys: ['title', 'Reciter'],
      threshold: 0.3,
      ignoreLocation: true,
      includeScore: true
    };
    const fuse = new Fuse(audioData, fuseOptions);

    // Function to generate HTML for the featured audio track
    function createFeaturedAudio(track) {
      return `
        <div class="featured-audio">
          <img src="${track.thumb}" alt="Featured Track" class="featured-thumbnail" loading="lazy">
          <div class="featured-info">
            <h2 class="featured-title">Featured: ${track.title}</h2>
            <audio controls preload="none">
              <source src="${track.file}" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
            <a href="${track.file}" download class="download-btn">Download Featured Naat</a>
          </div>
        </div>
      `;
    }

    // Function to generate HTML for a single audio item
    function createAudioItem(track) {
      return `
        <div class="audio-item">
          <img src="${track.thumb}" alt="Track Cover" class="thumbnail" loading="lazy">
          <div class="track-info">
            <h3 class="track-title">${track.title}</h3>
            <p class="track-Reciter">${track.Reciter}</p>
          </div>
          <audio controls preload="none">
            <source src="${track.file}" type="audio/mpeg">
            Your browser does not support the audio element.
          </audio>
          <a href="${track.file}" download class="download-btn">Download</a>
        </div>
      `;
    }

    // Function to ensure only one audio plays at a time
    function handleAudioControls() {
      const audios = document.querySelectorAll('audio');
      let currentAudio = null;
      audios.forEach(audio => {
        audio.addEventListener('play', () => {
          if (currentAudio && currentAudio !== audio) {
            currentAudio.pause();
          }
          currentAudio = audio;
        });
      });
    }

    // Render a page of audio items (for lazy loading)
    function renderAudioPage(filteredData) {
      const startIndex = currentPage * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const itemsToRender = filteredData.slice(startIndex, endIndex);
      const audioList = document.getElementById('audio-list');
      audioList.insertAdjacentHTML('beforeend', itemsToRender.map(createAudioItem).join(''));
      handleAudioControls();
      currentPage++;
    }

    // Function to reset and render the audio list from the beginning
    function renderAudioList(filteredData = null) {
      currentPage = 0;
      currentFilteredData = filteredData || audioData.filter(track => track.id != featuredTrack.id);
      document.getElementById('audio-list').innerHTML = "";
      renderAudioPage(currentFilteredData);
    }

    // Initial Render: Display featured track and first page of audio list
    document.getElementById('featured').innerHTML = createFeaturedAudio(featuredTrack);
    renderAudioList();

    // Infinite scroll: load next page when near bottom of the page
    window.addEventListener('scroll', () => {
      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 200) {
        if (currentPage * itemsPerPage < currentFilteredData.length) {
          renderAudioPage(currentFilteredData);
        }
      }
    });

    // Improved Search using Fuse.js on the navigation search bar
    document.getElementById('nav-search').addEventListener('input', function() {
      let query = this.value.trim();
      if (query === "") {
        document.getElementById('featured').innerHTML = createFeaturedAudio(featuredTrack);
        renderAudioList();
      } else {
        document.getElementById('featured').innerHTML = "";
        let results = fuse.search(query);
        let filteredData = results.map(result => result.item);
        renderAudioList(filteredData);
      }
    });
    
    // Alert Banner Dismissal Logic
    const alertBanner = document.getElementById('alert-banner');
    const closeAlertBtn = document.getElementById('close-alert');
    closeAlertBtn.addEventListener('click', () => { alertBanner.style.display = 'none'; });
    
    // Feedback Modal Logic
    const feedbackBtn = document.getElementById('feedback-btn');
    const feedbackModal = document.getElementById('feedback-modal');
    const closeBtn = document.querySelector('.modal .close');
    feedbackBtn.addEventListener('click', () => { feedbackModal.style.display = "block"; });
    closeBtn.addEventListener('click', () => { feedbackModal.style.display = "none"; });
    window.addEventListener('click', (event) => { if (event.target == feedbackModal) { feedbackModal.style.display = "none"; } });
    
    // Register the Service Worker for caching assets
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(registration => console.log('Service Worker registered:', registration))
        .catch(err => console.error('Service Worker registration failed:', err));
    }
  </script>
</body>
</html>